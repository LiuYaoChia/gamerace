<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ’˜ èšµä»”ï¼Œä½ å¿ƒåº•çš„åå­—</title>
  <link rel="stylesheet" href="happiness-game.css" />

  <style>
    /* ---------------------------------------------------
       ğŸ”¥ Samsung Android 8/9 Chrome Keyboard Fix
       Prevent body resizing when keyboard opens
    --------------------------------------------------- */
    html, body {
      height: 100%;
      overflow: hidden;     /* stop layout collapse */
      position: relative;  /* âœ… allow background */
      overflow: hidden;        /* prevent scrolling */
      inset: 0;
      width: 100%;
      touch-action: none;   /* avoid forced scroll jumps */
    }

    /* All scrollable content lives in this wrapper */
    #safe-wrapper {
      height: 100%;
      width: 100%;
      overflow: hidden;        /* remove scroll bar */
      display: flex;
      flex-direction: column;
      justify-content: start;  /* top align content */
      position: relative;
    }
  </style>
</head>

<body>
<div id="safe-wrapper"><!-- ğŸ”¥ FIX WRAPPER START -->

<!-- âœ… QR Code -->
<div id="qr-code">
  <img id="qr-img"
    src="https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=https%3A%2F%2Fliuyaochia.github.io%2Fgamerace%2FGame-setting%2Fhappiness-game.html"
    alt="ç„¡æ³•é¡¯ç¤º" />
</div>

<!-- âœ… Player Setup (hidden on host) -->
<div id="player-setup" style="display:none;">
  <h2 class="game-title">ğŸ’˜ èšµä»”ï¼Œä½ å¿ƒåº•çš„åå­—</h2>

  <!-- â›” NO MORE <form> â€” Samsung fix -->
  <div id="name-form">
    <input type="text" id="player-name" placeholder="è¼¸å…¥ä½ çš„åå­—" autocomplete="off" />
    
    <div id="group-choices"></div>

    <input type="hidden" id="group-select" />

    <!-- This becomes the JOIN button -->
    <button id="enable-motion" class="motion-btn">ğŸ® åŠ å…¥éŠæˆ²</button>
  </div>
</div>

<!-- âœ… Game Container -->
<div class="game-container">
  <div class="game-layout">

    <!-- ğŸ Track -->
    <div class="track" id="track">
      <!-- JS dynamically adds Cupids and lanes -->
    </div>
  </div>

  <!-- âœ… Floating Control Buttons -->
  <div class="control-panel">
    <button id="start-game">ğŸ® é–‹å§‹éŠæˆ²</button>
    <button id="reset-players">ğŸ”„ é‡ç½®</button>
    <button id="exit-game" class="exit-btn">ğŸšª é›¢é–‹éŠæˆ²</button>
  </div>

  <!-- ğŸ… Ranking Panel -->
  <div class="ranking-panel">
    <h3>ğŸ† æ’è¡Œæ¦œ</h3>
    <ul id="ranking-list"></ul>
  </div>
  
  <!-- âœ… Winner Popup -->
  <div id="winner-popup">
    <h2 id="winner-title">ğŸ† Winner!</h2>
    <div id="winner-scene"></div>
    <div id="winner-name"></div>
    <div id="winner-message"></div>
    <button id="winner-exit">é›¢é–‹éŠæˆ²</button>
  </div>

  <!-- â° Time Up Overlay -->
  <div class="overlay" id="timeup">TIME UP!</div>
</div>

<!-- ğŸ“± Phone view -->
<div id="phone-view" style="display:none;">
  <div id="phone-panel" class="glass">
    <div id="phone-label" class="phone-label">Waiting...</div>
    <img id="phone-cupid" alt="Cupid" class="phone-cupid" />
    <div class="btn-row">
      <button id="rename-group-btn" class="btn secondary" style="display:none;">é‡æ–°å‘½åçµ„åˆ¥</button>
      <button id="leave-group-btn" class="btn danger" style="display:none;">é›¢é–‹çµ„åˆ¥</button>
    </div>
    <div id="waiting-msg">ç­‰å¾…éŠæˆ²é–‹å§‹...</div>
  </div>
</div>

<!-- â³ Countdown Overlay -->
<div id="countdown-overlay">
  <div id="countdown-number"></div>
</div>

<script type="module" src="happiness-game.js"></script>
</body>
</html>










